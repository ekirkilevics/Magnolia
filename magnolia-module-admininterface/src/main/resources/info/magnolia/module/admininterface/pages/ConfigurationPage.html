<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>Server configuration page</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="${this.request.contextPath}/.resources/admin-css/admin-all.css" type="text/css" rel="stylesheet" />
  </head>
  <body id="mgnl" class="mgnlBgLight">
    <h1>Server configuration page</h1>
    <h3>General Magnolia Server Data</h3>
    <table summary="Server data">
      <thead>
        <tr>
          <th scope="col">Configuration</th>
          <th scope="col">Value</th>
        </tr>
      </thead>
      <tr>
        <td>Server up since...</td>
        <td>${this.server.getUptime()}</td>
      </tr>
      <tr>
        <td>Is admin server</td>
        <td>${this.server.isAdmin()?string}</td>
      </tr>
      <tr>
        <td>Default Mail Server</td>
        <td>this.server.getDefaultMailServer()</td>
      </tr>
      <tr>
        <td>Visible to Obinary</td>
        <td>${this.server.isVisibleToObinary()?string}</td>
      </tr>
      <tr>
        <td>Basic Realm</td>
        <td>${this.server.getBasicRealm()}</td>
      </tr>
      <tr>
        <td>404 URI</td>
        <td>${this.server.get404URI()}</td>
      </tr>
    </table>
    <h3>General Magnolia System Data</h3>
    <table summary="System data">
      <thead>
        <tr>
          <th scope="col">Configuration</th>
          <th scope="col">Value</th>
        </tr>
      </thead>
        [#assign keys = this.systemProperties?keys]
        [#list keys as key]
      <tr>
        <th align="left" scope="row">${key}</th>
        <td>${this.systemProperties[key]}</td>
      </tr>
      [/#list]
    </table>
    <h3>Virtual URIs</h3>
    <table cellspacing="0" summary="Virtual URIs">
      <thead>
        <tr>
          <th scope="col">From URI (URL Pattern)</th>
          <th scope="col">To URI</th>
        </tr>
      </thead>

      [#list this.virtualUriMappings as mapping]
      <tr>
        <th align="left" width="300" scope="row">${mapping[1]}</th>
        <td width="50%" >${mapping[0]}</td>
      </tr>
      [/#list]
    </table>
    <h3>Secure/Unsecure URIs</h3>
    <table cellspacing="0" summary="Secure/Unsecure URIs">
      <thead>
        <tr>
          <th width="300" scope="col">URL pattern</th>
          <th width="20%" scope="col">Secure</th>
          <th width="20%" scope="col">Unsecure</th>
        </tr>
      </thead>
        [#assign keys = this.secureURIs?keys]
        [#list keys as key]
        <tr>
        <th width="60%" align="left" scope="row">${key}<!--   ${this.secureURIs[key]} --></th>
        <td width="20%" align="center">x</td>
        <td width="20%"></td>
      </tr>
        [/#list]

        [#assign keys = this.unsecureURIs?keys]
        [#list keys as key]
      <tr>
        <th width="60%" align="left" scope="row">${key}</th>
        <td width="20%"></td>
        <td width="20%" align="center">x</td>
      </tr>
      [/#list]
    </table>
    <h3>Shutdown tasks</h3>
    <table summary="Shutdown tasks">
      <thead>
        <tr>
          <th scope="col">Task number(Lowest executed first)</th>
          <th scope="col">Java string description</th>
        </tr>
      </thead>
      [#list this.shutdownTasks as item]
      <tr>
        <th scope="row">${item_index}</th>
        <td>${item}</td>
      </tr>
      [/#list]
    </table>
  </body>
</html>