<!-- form for sorting and grouping -->
<input type="hidden" name="sortBy" value="${this.sortBy}"/>
<input type="hidden" name="sortByOrder" value="${this.sortByOrder}"/>
<input type="hidden" name="groupBy" value="${this.groupBy}"/>
<input type="hidden" name="groupByOrder" value="${this.groupByOrder}"/>

<script type="text/javascript">
    var ${this.name};

    // must be ready before the list is loaded
    var ${this.name}Items = new Object;

    MgnlDHTMLUtil.addOnLoad(function(){
        ${this.name} = new ${renderer.javaScriptClass}(${renderer.getConstructorArguments(this)});
        // add the columns
        [#list this.children as column]
            new mgnl.controls.ListColumn(
                ${this.name}, // the list itself
                '${column.width}', // 100 or 200px --> px means fixed size
                ${column_index} // index of this column
            );
        [/#list]
        // set the items now
        ${this.name}.items = ${this.name}Items;

        ${this.name}.resize();
    });

    MgnlDHTMLUtil.addOnResize(function(){${this.name}.resize();});
</script>

<div id="${this.name}" style="position:relative">
    [#assign style = ""]

    [#if this.groupableFields?has_content || this.sortableFields?has_content]
        <div id="${this.name}SortGroupDiv" class="mgnlListSortGroupDiv mgnlText">
            [#include "ListControlSortGroup.html"/]
        </div>
    [#elseif this.renderer.border]
        [#assign style = "border-right-style: solid;"]
    [/#if]

    [#if this.renderer.border]
        [#assign style = style + "border-bottom-style: solid;"]
    [/#if]

    <div id="${this.name}ContentDiv" class="mgnlListContentDiv mgnlBgLight" style="${style}" >
        [#include "ListControlContent.html"/]
    </div>
</div>