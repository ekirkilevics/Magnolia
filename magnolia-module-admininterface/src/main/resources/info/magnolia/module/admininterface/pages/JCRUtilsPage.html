<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>Deployment utils</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="${this.request.contextPath}/.resources/admin-css/admin-all.css" type="text/css" rel="stylesheet" />
  </head>
  <body id="mgnl">
      <table>
      <tr><td valign="top">
        <div class="pageframe">
          <h3>Dump</h3>
          <form action="">
            <input type="hidden" name="command" value="dump"/>
            <div class="formelement">
              <label for="repository">Repository</label>
              <select name="repository">
                [#list this.repositories as item]
                <option [#if item == this.repository]selected[/#if]>${item}</option>
                [/#list]
              </select>
            </div>
            <div class="formelement">
              <label for="repository">Path</label>
              <input type="text" name="path" value="${this.path}" />
            </div>
            <div class="formelement">
              <label for="repository">Level</label>
              <input type="text" name="level" value="${this.level}" />
            </div>
            <input type="submit" value="Execute" class="mgnlControlButton" />
          </form>
        </div>
        <div class="pageframe">
          <h3>Query</h3>
          <form action="">
              <input type="hidden" name="command" value="query"/>
            <div class="formelement">
              <label for="repository">Repository</label>
              <select name="repository">
                [#list this.repositories as item]
                <option [#if item == this.repository]selected[/#if]>${item}</option>
                [/#list]
              </select>
            </div>
            <div class="formelement">
             <label for="language">Query Language</label>
             <select name="language">
               [#list this.languages as item]
               <option [#if item == this.language]selected[/#if]>${item}</option>
               [/#list]
             </select>
           </div>
           <div class="formelement">
              <label for="repository">Result ItemType</label>
              <input type="text" name="itemType" value="${this.itemType?js_string}" />
            </div>
            <div>
                   <textarea name="statement" rows="4" cols="40" style="width:380px;height:200px">${this.statement}</textarea>
            </div>
            <input type="submit" value="Execute" class="mgnlControlButton" />
          </form>
        </div>
    </td>
    <td valign="top">
        <div class="pageframe">
          <h3>Result</h3>
          <textarea rows="40" cols="60">${this.result}</textarea>
        </div>
    </td>
    </tr></table>
    [#if message?exists]
        <script>alert('${message}')</script>
    [/#if]
  </body>
</html>