<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <script type="text/javascript" src="${contextPath}/.magnolia/pages/javascript.js"></script>
        <script type="text/javascript" src="${contextPath}/.magnolia/pages/messages.${this.language}.js"></script>
        <script type="text/javascript" src="${contextPath}/.resources/admin-js/dialogs/dialogs.js"></script>
        <script type="text/javascript" src="${contextPath}/.resources/calendar/calendar.js"></script>
        <script type="text/javascript" src="${contextPath}/.resources/js-libs/json/json.js"></script>
        <link rel="stylesheet" type="text/css" href="${contextPath}/.resources/admin-css/admin-all.css"/>

        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="pragma" content="no-cache" />
        <meta http-equiv="expires" content="0"/>

        <title>magnolia</title>

        <script type="text/javascript">
            var functionBar;

            function mgnlListResize(){
                // set the size of the list div
                var height = MgnlDHTMLUtil.getWindowSize().h;
                var width = MgnlDHTMLUtil.getWindowSize().w;
                if(functionBar){
                    var functionBarHeight = MgnlDHTMLUtil.getHeight(functionBar);
                    $('${this.list.name}Div').style.height = (height - functionBarHeight) + "px";
                    functionBar.style.top=(height - functionBarHeight) + "px";
                }
                else{
                    $('${this.list.name}Div').style.height = height + "px";
                }
                $('${this.list.name}Div').style.width = width + "px";
            }

            MgnlDHTMLUtil.addOnLoad(function(){
                functionBar = $('mgnlFunctionBarDiv');
                if(functionBar){
                    functionBar.style.position = "absolute";
                    functionBar.style.width = "100%";
                }
                mgnlListResize();
            });

            MgnlDHTMLUtil.addOnResize(function(){mgnlListResize();});
        </script>

        ${this.onRenderHeader()}
    </head>

    <body style="padding: 0px;margin: 0px">

        <form name="mgnlForm" style="margin: 0 0 0 0;" method="post" action="${contextPath}${this.URI}" >
            <input type="hidden" id="command" name="command" value="show"/>

            <!--  used by subclasses mainly to add additional hidden fields or js -->
            ${this.onRender()}

            <div id="${this.list.name}Div" style="position:absolute;">
                ${this.list.render()}
            </div>

            [#if this.list.contextMenu?exists]
                ${this.list.contextMenu.html}
                <script type="text/javascript">
                    ${this.list.contextMenu.javascript}
                </script>
            [/#if]

            [#if this.functionBar.menuItems?has_content]
                ${this.functionBar.html}
                <script type="text/javascript">
                    ${this.functionBar.javascript}
                </script>
            [/#if]

            [#if message?exists]
                <script type="text/javascript">MgnlDHTMLUtil.addOnLoad(function(){alert("${message?js_string}")});</script>
            [/#if]
        </form>

    </body>
</html>
