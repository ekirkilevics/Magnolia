<!-- form for sorting and grouping -->
<input type="hidden" name="sortBy" value="${this.sortBy?html}"/>
<input type="hidden" name="sortByOrder" value="${this.sortByOrder?html}"/>
<input type="hidden" name="groupBy" value="${this.groupBy?html}"/>
<input type="hidden" name="groupByOrder" value="${this.groupByOrder?html}"/>

<script type="text/javascript">
    function sort(name, direction){
        document.mgnlForm.sortBy.value = name;
        document.mgnlForm.sortByOrder.value = direction;
        document.mgnlForm.submit();
    }

    function group(name, direction){
        document.mgnlForm.groupBy.value = name;
        document.mgnlForm.groupByOrder.value = direction;
        document.mgnlForm.submit();
    }

</script>

<#if this.groupableFields?has_content>
    group:<br/>
    <#list this.groupableFields as field>
        <a href="javascript:group('${field}','${renderer.nextGroupByOrder(this, field)}');">${field}</a><br/>
    </#list>
</#if>

<#if this.sortableFields?has_content>
    sort:<br/>
    <#list this.sortableFields as field>
        <a href="javascript:sort('${field}','${renderer.nextSortByOrder(this, field)}');">${field}</a><br/>
    </#list>
</#if>


<table border="1">
    <tr>
        <#list this.children as column>
            <td>${column.label}</td>
        </#list>
    </tr>

    <#list this.iterator as item>
        <tr>
            <#list this.children as column>
                <td>${column.render()}</td>
            </#list>
        </tr>
    </#list>
</table>